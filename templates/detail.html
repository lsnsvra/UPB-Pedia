{% extends "base.html" %}

{% block title %}{{ product.title }} - Product Details{% endblock %}

{% block content %}
<div class="container">
    <!-- Breadcrumb Navigation -->
    <div class="breadcrumb">
        <a href="{{ url_for('index') }}">Home</a>
        <i class="fas fa-chevron-right"></i>
        <a href="{{ url_for('category', name=product.category) }}">{{ product.category|title }}</a>
        <i class="fas fa-chevron-right"></i>
        <span>{{ product.title[:30] }}{% if product.title|length > 30 %}...{% endif %}</span>
    </div>

    <!-- Product Details -->
    <div class="product-detail">
        <!-- Product Image -->
        <div class="product-detail-image">
            <img src="{{ product.image }}" alt="{{ product.title }}">
        </div>

        <!-- Product Information -->
        <div class="product-detail-info">
            <h1 class="product-detail-title">{{ product.title }}</h1>
            
            <!-- Rating -->
            <div class="product-detail-rating">
                <div class="stars">
                    {% for i in range(5) %}
                        {% if i < product.rating.rate|int %}
                            <i class="fas fa-star" style="color: #ffd700;"></i>
                        {% else %}
                            <i class="far fa-star" style="color: #ffd700;"></i>
                        {% endif %}
                    {% endfor %}
                    <span>{{ product.rating.rate }} ({{ product.rating.count }} reviews)</span>
                </div>
            </div>

            <!-- Price -->
            <div class="product-detail-price">
                <h2>${{ "%.2f"|format(product.price) }}</h2>
                {% if product.price < 50 %}
                <span class="badge-free-shipping">Free Shipping</span>
                {% endif %}
            </div>

            <!-- Category -->
            <div class="product-detail-category">
                <i class="fas fa-tag"></i>
                <strong>Category:</strong> {{ product.category|title }}
            </div>

            <!-- Description -->
            <div class="product-detail-description">
                <h3>Product Description</h3>
                <p>{{ product.description }}</p>
            </div>

            <!-- Add to Cart Form -->
            <div class="add-to-cart-section">
                <form action="{{ url_for('add_to_cart', product_id=product.id) }}" method="POST" class="cart-form">
                    <div class="quantity-selector">
                        <label for="quantity"><strong>Quantity:</strong></label>
                        <div class="quantity-controls">
                            <input type="number" id="quantity" name="quantity" value="1" min="1" max="10" style="width: 80px; padding: 10px; font-size: 1rem;">
                        </div>
                    </div>
                    
                    <div class="cart-buttons">
                        <button type="submit" class="btn-add-cart-large">
                            <i class="fas fa-cart-plus"></i> Add to Cart
                        </button>
                        <a href="{{ url_for('cart') }}" class="btn-checkout">
                            <i class="fas fa-shopping-cart"></i> View Cart
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Related Products Note -->
    <div class="related-products" style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center;">
        <h3>Looking for more?</h3>
        <p>Browse more products in <a href="{{ url_for('category', name=product.category) }}" style="color: #42b549; font-weight: bold;">{{ product.category|title }}</a> category</p>
    </div>
</div>
{% endblock %}